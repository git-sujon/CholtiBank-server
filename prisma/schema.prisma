// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum UserRole {
  customer
  admin
  loan_officer
  customer_service_representative
}

enum AccountStatus {
  active
  inActive
}

model User {
  id                String         @id @default(uuid())
  firstName         String
  lastName          String
  nationalId        String         @unique
  email             String         @unique
  phoneNumber       String         @unique
  password          String
  role              UserRole
  dateOfBirth       DateTime
  profilePicture    String?
  address           String?
  accountStatus     AccountStatus  @default(active)
  lastLogin         DateTime?
  passwordChangedAt DateTime?
  pinChangeAt       DateTime?
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  customerAccounts  FinancialInfo?
  devices           DeviceInfo[]
}

model FinancialInfo {
  id             String @id @default(uuid())
  accountNumber  String @unique
  accountBalance Float  @default(0.0)
  user           User   @relation(fields: [id], references: [id])
}

model DeviceInfo {
  id              String   @id @default(uuid())
  devicesId       String?
  devicesModel    String?
  devicesType     String?
  devicesVendor   String?
  browserName     String?
  browserVersion  String?
  engineName      String?
  engineVersion   String?
  osName          String?
  osVersion       String?
  cpuArchitecture String?
  agentClient     String?
  updatedAt       DateTime @updatedAt
  User            User     @relation(fields: [userId], references: [id])
  userId          String
}
